<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>News reader</title>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-animate.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-aria.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-sanitize.min.js"></script>
    <!-- Angular Material Library -->
    <script src="//ajax.googleapis.com/ajax/libs/angular_material/1.1.1/angular-material.min.js"></script>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/angular_material/1.1.1/angular-material.min.css">
    <link href="//fonts.googleapis.com/css?family=Architects+Daughter" rel="stylesheet" type="text/css">
    <script src="/news/js/insert.js"></script>
    <script src="/news/js/news.js"></script>
    <link rel="stylesheet" type="text/css" href="/news/styles/news.css" />
  </head>
  <body>
    <div id="control" class="root-container">
      <h1 class="title">News reader</h1>
      <div ng-app="news" id="news" class="news-container">
	<div ng-controller="providerCtrl" ng-cloak>
    	  <div class="languages" ng-if="is_multi_lingual()">
	    lang:
	    <a href="javascript:void(0)" class="languages" ng-click="hide_by_lang('*')">all</a>
	    <a ng-repeat="(lang, dummy) in languages" class="languages"
	       href="javascript:void(0)" ng-click="hide_by_lang(lang)">{{lang}}</a>
	  </div>
	  <div class="feeds-wrapper">
	    <div class="feed-contents" ng-repeat="summary in summaries" insert-thing ng-init="provider=summary.provider">
	      <div ng-if="provider" ng-hide="hide_provider[provider]" class="feeds">
		<md-toolbar style="min-height: 32px !important">
		  <div class="md-toolbar-tools" style="height: 32px !important">
		    <h2 class="provider" style="max-height: 30px !important"><a href="{{urls[provider]}}" target="_blank">{{provider}}</a></h2>
		    <span flex></span>
		    <md-button class="md-icon-button" ng-click="clear_filter(provider)" ng-disabled="is_loading()" ng-hide="!filters[provider]">
		      <md-icon md-svg-src="/news/img/close_32x32.svg" aria-label="Clear filter {{provider}}"></md-icon>
		    </md-button>
		    <md-button class="md-icon-button" ng-click="load_summary(provider)" ng-disabled="is_loading()">
		      <md-icon md-svg-src="/news/img/refresh_32x32.svg" aria-label="Refresh {{provider}}"></md-icon>
		    </md-button>
		  </div>
		</md-toolbar>
		<div class="feed-container">
		  <div ng-repeat="s in summary.feeds" class="feed" ng-hide="languages[s.language]">
		    <h3 class="title">
		      <a ng-click="show_link($event, s.link, s.title)" href="javascript:void(0)" class="link">{{s.title}}</a>
		    </h3>
		    <div class="summary" ng-bind-html="s.summary"></div>
		    <div class="published">
		      <a href="javascript:void(0)" ng-click="filter_by_url(provider, s.feed_url)">{{s.feed_name}}</a>,
		      {{s.created | date : 'MMM d, y h:mm:ss a'}}</div>
		  </div>
		  <div class="read-more" ng-hide="!offsets[provider]" ng-disabled="is_loading()">
		    <span ng-click="read_more(provider, offsets[provider])">Read more</span>
		  </div>
		</div>
	      </div>
	      <div ng-if="!provider" ng-bind-html="insert_thing($index)"></div>
	    </div>
	  </div>
	</div>
	<div id="footer" class="footer">
	  <div id="copyrights" class="copyrights">
	    <div class="copyright">
	      Icons created by <a href="http://www.bogdanrosu.com/">Bogdan Rosu Creative</a>
	    </div>
	    <div class="copyright">
	      &copy; 2016 Takashi Kato
	    </div>
	  </div>
	</div>
      </div>
    </div>
  </body>
</html>
