#!/bin/sh
#| -*- mode:scheme; coding:utf-8 -*-
this_path=`dirname "$0"`
SAGITTARIUS=${SAGITTARIUS:-"sagittarius"}
exec $SAGITTARIUS -L${this_path}/../lib $0 "$@"
|#

(import (rnrs)
	(news-reader commands)
	(news-reader database)
	(util logging)
	(dbi))

(define dbi-conn (make-dbi-connection))

(define add-provider (generate-add-provider dbi-conn))

(define console-logger
  (make-logger +info-level+ (make-appender "[~w5] [~l] ~m")))

(define (main args)
  (unless (= (length args) 3)
    (print "add-provider NAME URL")
    (exit -1))
  (*command-logger* console-logger)
  (add-provider (cadr args) (caddr args))
  (dbi-connection-commit! dbi-conn))
